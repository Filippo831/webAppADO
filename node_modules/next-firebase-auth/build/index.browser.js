module.exports=(()=>{"use strict";var e={376:(e,t,r)=>{r.d(t,{default:()=>x});const n=require("@babel/runtime/helpers/defineProperty");var i=r.n(n);const o=require("@babel/runtime/helpers/objectWithoutProperties");var a=r.n(o);const s=()=>"undefined"!=typeof window;var u=!1,l=e=>{u=e};const c=function(){if(u){for(var e=s()?["%cnext-firebase-auth","background: #ffa000; color: #fff; border-radius: 2px; padding: 2px 6px"]:["next-firebase-auth:"],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];console.log(...e,...r)}};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h,p=12096e5,g={debug:!1,loginAPIEndpoint:void 0,logoutAPIEndpoint:void 0,tokenChangedHandler:void 0,authPageURL:void 0,appPageURL:void 0,firebaseAdminInitConfig:void 0,firebaseClientInitConfig:void 0,cookies:{name:void 0,keys:void 0,domain:void 0,httpOnly:!0,maxAge:6048e5,overwrite:!0,path:"/",sameSite:"strict",secure:!0,signed:!0}},v=e=>{var t=[];e.tokenChangedHandler?(e.loginAPIEndpoint&&t.push('The "loginAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".'),e.logoutAPIEndpoint&&t.push('The "logoutAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".')):(e.loginAPIEndpoint||t.push('The "loginAPIEndpoint" setting is required.'),e.logoutAPIEndpoint||t.push('The "logoutAPIEndpoint" setting is required.')),e.firebaseClientInitConfig&&e.firebaseClientInitConfig.apiKey||t.push('The "firebaseClientInitConfig.apiKey" value is required.');var{keys:r}=e.cookies,n=r&&r.length&&(!r.filter||r.filter((e=>void 0!==e)).length);return s()?(e.firebaseAdminInitConfig&&e.firebaseAdminInitConfig.credential&&e.firebaseAdminInitConfig.credential.privateKey&&t.push('The "firebaseAdminInitConfig" private key setting should not be available on the client side.'),n&&t.push('The "cookies.keys" setting should not be available on the client side.')):(e.cookies.name||t.push('The "cookies.name" setting is required on the server side.'),e.cookies.signed&&!n&&t.push('The "cookies.keys" setting must be set if "cookies.signed" is true.'),e.cookies.maxAge>p&&t.push('The "cookies.maxAge" setting must be less than two weeks ('.concat(p," ms)."))),{isValid:0===t.length,errors:t}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c("Setting config with provided value:",e);var{cookies:t={}}=e,r=a()(e,["cookies"]),n=f(f(f({},g),r),{},{cookies:f(f({},g.cookies),t)}),{isValid:i,errors:o}=v(n);if(!i)throw new Error("Invalid next-firebase-auth options: ".concat(o.join(" ")));h=n},y=()=>{if(!h)throw new Error("next-firebase-auth must be initialized before rendering.");return h};const w=require("react");var E=r.n(w);const O=require("next/router"),A=require("@babel/runtime/helpers/asyncToGenerator");var m=r.n(A);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const P=function(){var{firebaseUserClientSDK:e,firebaseUserAdminSDK:t,serializedAuthUser:n,clientInitialized:i=!1,token:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c("Called createAuthUser with arguments:",{firebaseUserClientSDK:e,firebaseUserAdminSDK:t,serializedAuthUser:n,clientInitialized:i,token:o});var a=[e,t,n].reduce(((e,t)=>t?e+1:e),0);if(a>1)throw new Error('createAuthUser cannot receive more than one of the following properties: "firebaseUserClientSDK", "firebaseUserAdminSDK", "serializedAuthUser"');if(i&&(t||n))throw new Error('The "clientInitialized" value can only be true when called with the "firebaseUserClientSDK" property or no user.');if(o&&!t)throw new Error('The "token" value can only be set if the "firebaseUserAdminSDK" property is defined.');var u,l=null,d=null,f=!1,h=function(){var e=m()((function*(){return null}));return function(){return e.apply(this,arguments)}}();s()&&(r(942),u=r(421).default);var p=function(){var e=m()((function*(){}));return function(){return e.apply(this,arguments)}}(),g=null;if(e)l=e.uid,d=e.email,f=e.emailVerified,h=function(){var t=m()((function*(){return e.getIdToken()}));return function(){return t.apply(this,arguments)}}(),p=function(){var e=m()((function*(){return u.auth().signOut()}));return function(){return e.apply(this,arguments)}}(),g=null;else if(t)l=t.uid,d=t.email,f=t.email_verified,h=function(){var e=m()((function*(){return o}));return function(){return e.apply(this,arguments)}}(),g=o;else if(n){var v=JSON.parse(n);l=v.id,d=v.email,f=v.emailVerified,h=function(){var e=m()((function*(){return v._token||null}));return function(){return e.apply(this,arguments)}}(),g=v._token}return{id:l,email:d,emailVerified:f,getIdToken:h,clientInitialized:i,firebaseUser:e||null,signOut:p,serialize:function(){var{includeToken:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(k({id:l,email:d,emailVerified:f,clientInitialized:i},e&&{_token:g}))}}};var C=(0,w.createContext)(P());var T=r(421),R=r.n(T),U=(r(942),function(){var e=m()((function*(e){var t,{loginAPIEndpoint:r,logoutAPIEndpoint:n}=y();if(e.id){var i=yield e.getIdToken();if(!(t=yield fetch(r,{method:"POST",headers:{Authorization:i},credentials:"include"})).ok){var o=yield t.json();throw new Error("Received ".concat(t.status," response from login API endpoint: ").concat(JSON.stringify(o)))}}else if(!(t=yield fetch(n,{method:"POST",credentials:"include"})).ok){var a=yield t.json();throw new Error("Received ".concat(t.status," response from logout API endpoint: ").concat(JSON.stringify(a)))}return t}));return function(t){return e.apply(this,arguments)}}()),S=function(){var e=m()((function*(e){var{tokenChangedHandler:t}=y(),r=P({firebaseUserClientSDK:e,clientInitialized:!0});return t?t(r):U(r)}));return function(t){return e.apply(this,arguments)}}();const D=()=>{var[e,t]=(0,w.useState)(),[r,n]=(0,w.useState)(!1);function i(e){return o.apply(this,arguments)}function o(){return(o=m()((function*(e){t(e),n(!0),yield S(e)}))).apply(this,arguments)}return(0,w.useEffect)((()=>{var e=R().auth().onIdTokenChanged(i);return()=>e()}),[]),{user:e,initialized:r}},j={RENDER:"render",SHOW_LOADER:"showLoader",RETURN_NULL:"returnNull",REDIRECT_TO_LOGIN:"redirectToLogin",REDIRECT_TO_APP:"redirectToApp"};function _(){if(!R().apps.length){var{firebaseClientInitConfig:e}=y();if(!e)throw new Error('If not initializing the Firebase JS SDK elsewhere, you must provide "firebaseClientInitConfig" to next-firebase-auth.');R().initializeApp(e)}}const x={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(!0===e.debug),b(e),s()&&_()},withAuthUser:function(){var{whenAuthed:e=j.RENDER,whenUnauthedBeforeInit:t=j.RENDER,whenUnauthedAfterInit:r=j.RENDER,appPageURL:n=null,authPageURL:i=null,LoaderComponent:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u=>{var l=l=>{var{AuthUserSerialized:c}=l,d=a()(l,["AuthUserSerialized"]),f=P({serializedAuthUser:c}),{user:h,initialized:p}=D(),g=P({firebaseUserClientSDK:h,clientInitialized:p}),v=p?g:f,b=!!v.id,A=v.clientInitialized,m=b&&e===j.REDIRECT_TO_APP,I=!b&&(!A&&t===j.REDIRECT_TO_LOGIN||A&&r===j.REDIRECT_TO_LOGIN),k=(0,O.useRouter)(),T=(0,w.useCallback)((()=>{var e=n||y().appPageURL;if(!e)throw new Error('The "appPageURL" config setting must be set when using `REDIRECT_TO_APP`.');k.replace(e)}),[k]),R=(0,w.useCallback)((()=>{var e=i||y().authPageURL;if(!e)throw new Error('The "authPageURL" config setting must be set when using `REDIRECT_TO_LOGIN`.');k.replace(e)}),[k]);if((0,w.useEffect)((()=>{s()&&(m?T():I&&R())}),[m,I,T,R]),m||I)return null;if(!A&&!b){if(t===j.SHOW_LOADER)return o?E().createElement(o,null):null;if(t===j.RETURN_NULL)return null}return E().createElement(C.Provider,{value:v},E().createElement(u,d))};return l.displayName="WithAuthUserHOC",l}},useAuthUser:()=>(0,w.useContext)(C),withAuthUserSSR:()=>{throw new Error('"withAuthUserSSR" can only be called server-side.')},withAuthUserTokenSSR:()=>{throw new Error('"withAuthUserTokenSSR" can only be called server-side.')},setAuthCookies:()=>{throw new Error('"setAuthCookies" can only be called server-side.')},unsetAuthCookies:()=>{throw new Error('"unsetAuthCookies" can only be called server-side.')},verifyIdToken:()=>{throw new Error('"verifyIdToken" can only be called server-side.')},AuthAction:j}},421:e=>{e.exports=require("firebase/app")},942:e=>{e.exports=require("firebase/auth")}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(376)})().default;